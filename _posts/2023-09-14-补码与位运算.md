---
layout: post
title: 补码与位运算
date: 2023-09-14 15:03 +0800
categories: [JOB, C++]
tags: [C++]
mermaid: true
---

[原码、反码、补码](https://zhuanlan.zhihu.com/p/118432554)

[补码的计算方法](https://zhuanlan.zhihu.com/p/376848035)

[C++ 算法篇 位运算](https://blog.csdn.net/weixin_43736974/article/details/84543970)


## 补码

### 原码

最高位为符号位，0表示正数，1表示负数。

### 反码

最高位为符号位，0表示正数，1表示负数。

正数的反码等于本身，负数的反码是按位取反，符号位为1。

### 补码

计算机通常以**二进制补码**的形式存储整数，最高位是符号位，0 表示正数，1 表示负数，其余位为数字位。正数表示为自身，负数的二进制补码形式为**符号位为1，数字位是其反码加一**。

![20230914151503](https://cdn.jsdelivr.net/gh/jamie109/my-img/for-VSCode/20230914151503.png)

- **正十进制数补码等于其本身，n位寄存器下-X的补码等于$ 2^{n}-X $对应的二进制数**，其中X为正数。

- 补码的补码就是原码。

- 一个数的反码，实际上是这个数对于一个模的同余数，而这个模是我们的二进制所能表示的最大值。


### 已知补码求原码
  
- 原码 = 补码取反+1
- 原码 = 补码-1，然后取反
- 注意计算时不含符号位
  
## 位运算符

### 1、按位与&

- 是否能被2整除，`n&1 == 1`。
- 在一个数中取出指定位。
- 清零，`n&0`。


### 2、按位异或^

- 满足交换律、结合律。

- $x^0=x$ $x^x=0$ $x^y^y=x$
- 一个数的奇数次异或是本身，偶数次异或是0。

- 交换两个数。`a = a^b;   b = b^a;  a = a^b;`。

### 3、按位左移、右移

- 左移运算符是用来将一个数的各二进制位左移若干位，右边空出的位用0填补，高位左移溢出则舍弃该高位。
- 右移运算符是用来将一个数的各二进制位右移若干位，移到右端的低位被舍弃。对于无符号数，高位补0；对于有符号数，某些机器将对左边空出的部分用符号位填补（即“**算术移位**”），而另一些机器则对左边空出的部分用0填补（即“**逻辑移位**”）。
  
### 4、运算

如果两个不同长度的数据进行位运算时，系统会将二者**按右端对齐**，然后进行位运算。右端对齐后，左边不足的位依下面三种情况补足：

1. 如果整型数据为正数，左边补0。

2. 如果整型数据为负数，左边补1。

3. 如果整形数据为无符号数，左边也补0。