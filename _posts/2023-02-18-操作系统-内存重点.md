---
layout: post
title: "[操作系统]内存重点"
date: 2023-02-18 09:54 +0800
author: jamie109
categories: [CS_course, OS]
tags: [CS course note]
mermaid: true
math: true
---
不同进程的相同**用户态**虚拟地址会映射到**不同的物理地址** (隔离)。不同进程的相同**内核态**虚拟地址会映射到**相同的物理地址** (共享)。

## 1.二级分页机制    

### 引入二级页表怎么所需内存更大了?      
在计算机内存管理中，二级页表是一种用于管理虚拟内存的数据结构，它通过将虚拟地址空间分成多个页表来**减少`每个页表`的大小**，从而更加高效地管理内存。然而，**引入二级页表会使得所需的内存空间更大，这是因为它增加了内存中存储页表的数量**。

具体来说，一级页表通常是将整个虚拟地址空间分成多个固定大小的页，并将每个页映射到物理内存中的相应位置。这种方案的缺点是**当虚拟地址空间非常大时，页表的大小也会非常大，占用大量的内存空间**。因此，为了减少每个页表的大小，可以将虚拟地址空间分成多个页目录，并将每个页目录指向另一个页表。

由于引入了二级页表，每个页表的大小会更小，但是需要额外的内存来存储页目录。具体而言，二级页表所需的内存大小为页目录数目乘以每个页目录项的大小再加上所有二级页表所需的内存大小。因此，引入二级页表会增加内存中存储页表的数量，从而增加所需内存的大小。

需要注意的是，二级页表带来的内存消耗并不是一定会增加，具体取决于系统的虚拟地址空间的大小和每个页表的大小。如果系统的虚拟地址空间比较小，或者每个页表的大小比较大，那么引入二级页表带来的内存消耗就会比较小。而如果系统的虚拟地址空间很大，或者每个页表的大小比较小，那么引入二级页表所需的内存就会比较大。因此，在使用二级页表时，需要根据实际情况来评估所需的内存大小。

## 2.多级分页映射机制    

