---
layout: post
title: 图解HTTP：了解Web及网络基础
date: 2023-09-20 16:46 +0800
categories: [CS_course, CN]
tags: [computer network, HTTP]
mermaid: true
math: true
---

## 1、访问Web

根据Web 浏览器地址栏中指定的 URL，Web 浏览器从Web 服务器端获取文件资源（resource）等信息，从而显示出Web 页面。**Web 使用一种名为 HTTP（HyperText Transfer Protocol，超文本传输协议）的协议作为规范**，完成从客户端到服务器端等一系列运作流程。而协议是指规则的约定。可以说，Web 是建立在 HTTP 协议上通信的。

CERN（欧洲核子研究组织）的蒂姆 • 伯纳斯 - 李（Tim BernersLee）博士提出了一种能让远隔两地的研究者们共享知识的设想。 最初设想的基本理念是：借助多文档之间相互关联形成的超文本（HyperText），连成可相互参阅的**WWW（World Wide Web，万维网）**。

现在已提出了 3 项WWW构建技术：分别是：把SGML（Standard Generalized Markup Language，标准通用标记语言）作为页面的文本标记语言的**HTML（HyperText Markup Language，超文本标记语言）**；作为**文档传递协议的HTTP；指定文档所在地址的URL（Uniform Resource Locator，统一资源定位符）。**

## 2、HTTP发展

HTTP协议的出现主要是为了解决文本传输的难题。

1. HTTP/0.9
   
   HTTP于1990年问世。那时的HTTP并没有作为正式的标准被建立。现在的HTTP其实含有HTTP1.0之前版本的意思，因此被称为HTTP/0.9。

2. HTTP/1.0
   
   HTTP 正式作为标准被公布是在 1996 年的 5 月，版本被命名为 HTTP/1.0。

3. HTTP/1.1
   
   1997 年 1 月公布的 HTTP/1.1 是目前（作者写书的时候）主流的 HTTP 协议版本。

## 3、网络基础 TCP/IP

### TCP/IP分层

**TCP/IP 是互联网相关的各类协议族的总称**。通常使用的网络（包括互联网）是在 TCP/IP 协议族的基础上运作的，而HTTP 属于它内部的一个子集。

TCP/IP 协议族按层次分别分为以下 4 层：应用层、传输层、网络层和数据链路层。

- 应用层：**决定向用户提供应用服务时通信的活动**，TCP/IP 协议族内预存了各类通用的应用服务，HTTP 协议也处于该层。
- 传输层：传输层对上层应用层，提供处于网络连接中的两台计算机之间的**数据传输**。有两种协议：TCP、UDP。
- 网络层：网络层用来**处理在网络上流动的数据包**。数据包是网络传输的最小数据单位。该层**规定了通过怎样的路径（所谓的传输路线）到达对 方计算机，并把数据包传送给对方**。
- 数据链路层：用来处理连接网络的硬件部分。

利用 TCP/IP 协议族进行网络通信时，会通过分层顺序与对方进行通信。发送端从应用层往下走，接收端则往应用层往上走。发送端在层与层之间传输数据时，每经过一层时必定会**被打上一个该层所属的首部信息**；反之，接收端在层与层传输数据时，每经过一层时会**把对应的首部消去**。
这种把数据信息包装起来的做法称为**封装**（encapsulate）。

### 负责传输的 IP 协议

IP（Internet Protocol）网际协议位于网络层，几乎所有使用网络的系统都会用到 IP 协议。

**IP 协议的作用是把各种数据包传送给对方**。而要保证确实传送到对方那里，则需要满足各类条件。其中两个重要的条件是 IP 地址和MAC 地址（Media Access Control Address）。 **IP 地址指明了节点被分配到的地址，MAC地址是指网卡所属的固定地址**。IP 地址可以和MAC地址进行配对。IP 地址可变换，但MAC 地址基本上不会更改。

**IP 间的通信依赖MAC地址**。在网络上，通信的双方在同一局域网（LAN）内的情况是很少的，通常是经过多台计算机和网络设备**中转**才能连接到对方。而**在进行中转时，会利用下一站中转设备的MAC地址来搜索下一个中转目标**。这时，会采用 ARP 协议（Address Resolution Protocol）。**ARP 是一种用以解析地址的协议，根据通信方的 IP 地址就可以反查出对应的MAC地址**。

在到达通信目标前的中转过程中，那些计算机和路由器等网络设备 只能获悉很粗略的传输路线。 这种机制称为**路由选择**（routing），有点像快递公司的送货过程。

### 确保可靠性的 TCP 协议 

按层次分，TCP 位于传输层，提供**可靠的字节流服务**。

- 字节流服务：为了方便传输，将大块数据分割成以报文段（segment）为单位的数据包进行管理。
- 可靠：能够把数据准确可靠地传给对方。
- 三次握手：发送端首先发送一个带 SYN 标志的数据包给对方。接收端收到后，回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。最后，发送端再回传一个带ACK标志的数据包，代表“握手”结束。 若在握手过程中某个阶段莫名中断，TCP 协议会再次以相同的顺序发送相同的数据包。
  
### 负责域名解析的DNS服务

DNS（Domain Name System）服务是和 HTTP 协议一样**位于应用层**的协议。它**提供域名到 IP 地址之间的解析服务**。

![20230920175113](https://cdn.jsdelivr.net/gh/jamie109/my-img/for-VSCode/20230920175113.png)

## 4、URI 和URL

URI （统一资源标识符）就是由某个协议方案表示的资源的定位标识符，协议方案是指访问资源所使用的协议类型名称（采用 HTTP 协议时，协议方案就是 http）。

```
URI示例
ftp://ftp.is.co.za/rfc/rfc1808.txt 
http://www.ietf.org/rfc/rfc2396.txt
```

**URI 用字符串标识某一互联网资源，而 URL 表示资源的地点（互联网上所处的位置）**。可见URL是 URI 的子集。